In this example we create entanglement between two qutrits with single photon sources.

We want the photons entangled in a three dimensional Bell state.

Psi = Psi_BD = |00>+|11>+|22> (without normalization)

The setup we are optimizing for here is one where photons are emitted by single photon emitters (identifiable 'single_emitters').

In this case, six photons are emitted and the setup (which we optimize) manipulates them before they enter the detectors.

We can visualize the setup in the following way (with the photons going from top to bottom):

emitters: [2][3][4][5][6][7]
setup: [result of optimization]
detectors: [0][1][anc. det.][anc. det.][anc. det.][anc. det.]

where [0] and [1] are the detectors where the Bell state should be created. [anc. det.] are ancillary detectors, which should be measured by a third party.

The setup to create a 3d Bell state setup would normally be easier to realize, but we want to create this state in a way that is inspired by entanglement swapping. This means, that [0] should be measured by Alice, [1] should be measured by Bob and the ancillary detectors should be measured by Charlie.

There should be no emitter that can send a photon to both Alice and Bob. We choose that there are three emitters that can send photons to Bob and Charlie ([2],[3],[4]) and three emitters that can send photons to Alice and Charlie ([5],[6],[7]).

In the context of single photon emitters, the keyword 'removed_connections' excludes paths between the specified pairs of source and detector.
We thus include all of these forbidden paths.

This would not be possible without ancillary particles (there number is given by 'num_anc'). The ancillary particles are measured by a third party.

The standard entanglement swapping experiment uses probabilistic photon pair sources whereas this uses single photon sources.

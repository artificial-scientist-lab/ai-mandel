In this example we create entanglement between two parties of three qubits each.
This means that we want to create six qubits: A, B, C on one side and D, E, F on the other side.

The goal is to have each corresponding pair (A&D, B&E, C&F) form a two-dimensional Bell state. In other words, we want to create a state that is essentially the tensor product of three independent Bell states, one for each pair of qubits:
ΨAD⊗ΨBE⊗ΨCF

Each ΨXYΨXY​ is of the form ∣00⟩+∣11⟩∣00⟩+∣11⟩ (without normalization), where XX is one qubit in the first party’s group, and YY is the corresponding qubit in the second party’s group.

Putting this together, the desired target state for the six qubits (A, B, C, D, E, F) is:
ΨABCDEF=∣000000⟩+∣001001⟩+∣010010⟩+∣011011⟩+∣100100⟩+∣101101⟩+∣110110⟩+∣111111⟩
(without normalization).

The setup we aim to construct uses probabilistic photon-pair sources. Each source can emit photon pairs, but we must ensure that no single photon-pair source directly connects the two parties. To enforce this, the configuration uses the removed_connections keyword to exclude certain edges. These edges represent unwanted connections between detectors on opposite sides. For example, connections from the qubits in the first party (A, B, C) to those in the second party (D, E, F) are removed:
[[0,3],[0,4],[0,5],[1,3],[1,4],[1,5],[2,3],[2,4],[2,5]]
[[0,3],[0,4],[0,5],[1,3],[1,4],[1,5],[2,3],[2,4],[2,5]]

Here, the numbers 0,1,2 correspond to A,B,C and 3,4,5 correspond to D,E,F. Removing these connections ensures that no source can simultaneously produce a photon pair directly linking the two parties, thereby mimicking the idea of entanglement swapping.

To achieve this entangled configuration, ancillary photons must be introduced. The number of ancillary photons is specified in the num_anc field. These ancillary photons are measured by a third party. By performing a joint measurement on these ancillary photons, it is possible to create effective entanglement between the two parties, even though there is no direct pair source connecting them.

In a standard scenario, attempting to non-locally entangle three qubit pairs independently would require a larger number of ancillary particles. However, by integrating all three pairs into a single combined setup and using a clever measurement scheme inspired by entanglement swapping, fewer ancillary particles are needed overall.
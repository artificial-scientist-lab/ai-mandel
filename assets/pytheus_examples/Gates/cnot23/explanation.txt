In this example we create a CNOT(2,3) gate, which means that we have a control qubit and the gate acts on a qutrit.

If the qubit is in mode 0, nothing happens to the target qutrit.
If the qubit is in mode 1, we add 1 (mod 3) to the mode of the qutrit.

We express this transformation in the key word 'target_state'.

the value for the keyword 'in_nodes' being [0,1] expresses that the first two numbers are the incoming particles.

the value for the keyword 'out_nodes' being [2,3] expresses that the third and fourth numbers are the outgoing particles.

We can read the value for 'target_state'

    "0000" means |00> --> |00>
    "0101" means |01> --> |01>
    "0202" means |02> --> |02>
    "1011" means |10> --> |11>
    "1112" means |11> --> |12>
    "1210" means |12> --> |10>

This transformation requires four ancillary photons which are created from probabilistic photon pair sources.

We set "heralding_out" to true so that the correct operation of the gate is signaled (heralded) when the ancillary detectors click. The threshold parameters (under "thresholds") and other entries (such as "bulk_thr", "loss_func", "optimizer", and "tries_per_edge") govern the optimization process. 
Thought: The researcher wants a Pytheus‐compatible config that implements a heralded “quantum router” which, by different ancilla click patterns, post-selects one of three Bell pairs between different end-node pairs. We must abstract away any plasmonic/nanophotonic detail, use only SPDC pair sources, ancilla photons, a 4-mode interferometer, heralding detectors, and removed_connections to forbid unwanted cross-links. We’ll build a transformation gate: two incoming SPDC pairs (A1–A2 and B1–B2) plus two ancilla photons (C1,C2) mix in a 4-mode network, with detectors on C1,C2 heralding one of three output Bell states on A2 and B2 (or A2 and C3, or B2 and C3). We choose node indices 0–3 for A1,B1,C1,C2 inputs and 4–5 for the two output modes. We forbid AB cross-pairing via removed_connections. We list three target_state entries mapping input patterns to the three possible Bell outputs.

Action: accept
Action Input:
{
  "description": "Heralded multiplexed entanglement router: same 4-mode linear optics projects onto one of three Bell pairs (A2–B2, A2–C3, B2–C3) by different ancilla clicks",
  "foldername": "quantum_router",
  "bulk_thr": 0.1,
  "edges_tried": 30,
  "ftol": 1e-06,
  "loss_func": "cr",
  "num_anc": 2,
  "num_pre": 1,
  "optimizer": "L-BFGS-B",
  "imaginary": false,
  "safe_hist": true,
  "samples": 10,
  "target_state": [
    "000011",   // A1,B1,C1,C2 = 0,0,0,0 → outputs A2,B2 = 1,1 (Bell_AB)
    "001010",   // 0,0,1,0 → 1,0 (Bell_Alice–Charlie)
    "010001"    // 0,1,0,0 → 0,1 (Bell_Bob–Charlie)
  ],
  "in_nodes": [0, 1, 2, 3],
  "out_nodes": [4, 5],
  "thresholds": [0.3, 0.1],
  "heralding_out": null,
  "single_emitters": [],
  "amplitudes": [],
  "tries_per_edge": 5,
  "removed_connections": [
    [0, 1],    // forbid any single SPDC from linking A and B modes
    [1, 0]     // make the AB separation explicit both ways
  ],
  "seed": null,
  "unicolor": false,
  "number_resolving": true,
  "novac": null,
  "loops": null,
  "topopt": null,
  "dimensions": [],
  "brutal_covers": null,
  "verts": [],
  "anc_detectors": []
}